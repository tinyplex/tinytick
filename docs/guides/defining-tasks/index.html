<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="preload" as="image" href="/favicon.svg"><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-14BZ56H85M"></script><link rel="dns-prefetch" href="https://www.googletagmanager.com/"><link href="https://www.googletagmanager.com/gtag/js?id=G-14BZ56H85M" rel="preload" as="script"><link rel="preload" as="font" href="/fonts/inter.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/inconsolata.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/shantell.woff2" type="font/woff2" crossorigin="anonymous"><title>Defining Tasks | TinyTick</title><meta name="description" content="This guide shows you how to define tasks in TinyTick."><meta property="og:type" content="website"><meta property="og:title" content="Defining Tasks | TinyTick"><meta property="og:description" content="This guide shows you how to define tasks in TinyTick."><meta property="og:url" content="https://tinytick.org/guides/defining-tasks/"><meta property="og:image" content="https://tinytick.org/favicon_pad.png"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Defining Tasks | TinyTick"><meta name="twitter:description" content="This guide shows you how to define tasks in TinyTick."><meta name="twitter:site" content="@tinybasejs"><meta name="twitter:image" content="https://tinytick.org/favicon_pad.png"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="canonical" href="https://tinytick.org/guides/defining-tasks/"><link rel="stylesheet" href="/css/index.css"><script src="/js/app.js"></script></head><body><header><a href="/"><img src="/favicon.svg" alt="TinyTick logo"><span>TinyTick</span></a><nav><ul><li><a href="/guides/">Guides</a></li><li><a href="/demos/">Demos</a></li><li><a href="/api/">API</a></li><li><a href="https://github.com/tinyplex/tinytick">GitHub</a></li></ul></nav><span id="dark"></span></header><main><nav><ul><li id="root" class="parent open"><span></span><a href="/">TinyTick</a><ul><li id="G" class="parent open"><span></span><a href="/guides/">Guides</a><ul><li id="GS"><span></span><a href="/guides/getting-started/">Getting Started</a></li><li id="KC"><span></span><a href="/guides/key-concepts/">Key Concepts</a></li><li id="DT" class="current"><span></span><a href="/guides/defining-tasks/">Defining Tasks</a></li><li id="ST"><span></span><a href="/guides/scheduling-tasks/">Scheduling Tasks</a></li><li id="AU" class="parent"><span></span><a href="/guides/advanced-usage/">Advanced Usage</a></li><li id="EUC" class="parent"><span></span><a href="/guides/example-use-cases/">Example Use Cases</a></li><li id="R"><span></span><a href="/guides/releases/">Releases</a></li></ul></li><li id="D" class="parent"><span></span><a href="/demos/">Demos</a></li><li id="api" class="parent"><span></span><a href="/api/">API</a></li></ul></li></ul></nav><article><nav><ul><li><a href="/">TinyTick</a></li><li><a href="/guides/">Guides</a></li><li><a href="/guides/defining-tasks/">Defining Tasks</a></li></ul></nav><section class="s1" id="/guides/defining-tasks/" data-id="DT"><h1>Defining Tasks</h1><p>This guide shows you how to define tasks in TinyTick.</p><h3 id="what-is-a-task">What is a task?</h3><p>A task is an asynchronous function that you will be scheduling to run at a specific time under the control of TinyTick. You define tasks and assign them to unique <a href="/api/tinytick/type-aliases/identity/ids/"><code>Ids</code></a> with the <a href="/api/tinytick/interfaces/manager/manager/methods/task/settask/"><code>setTask</code></a> method of the <a href="/api/tinytick/interfaces/manager/manager/"><code>Manager</code></a> object.</p><p>By asynchronous, we mean that the task function will return a Promise that resolves when the task is complete. This allows TinyTick to manage the task&#x27;s execution in a non-blocking way, so that other tasks (and your own code) can seemingly run concurrently.</p><p>The easiest way to do this in modern JavaScript is with the <code>async</code> keyword. This snippet, for example, shows us creating a very simple task that fetches content from a website using the platform&#x27;s <code>fetch</code> function:</p><pre><code><span class="keyword">const</span> <span class="function-variable">ping</span> <span class="operator">=</span> <span class="keyword">async</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="keyword">await</span> <span class="function">fetch</span><span class="punctuation">(</span><span class="string">'https://example.org'</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>The <code>fetch</code> function is, in turn, asynchronous, so it needs to be awaited in our task function.</p><h3 id="registering-a-task">Registering a task</h3><p>We need to register a task with a <a href="/api/tinytick/interfaces/manager/manager/"><code>Manager</code></a> object before we can schedule it. To do this, we use its <a href="/api/tinytick/interfaces/manager/manager/methods/task/settask/"><code>setTask</code></a> method, as shown in the example below:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createManager<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinytick'</span><span class="punctuation">;</span>

<span class="keyword">const</span> manager <span class="operator">=</span> <span class="function"><a href="/api/tinytick/functions/creation/createmanager/">createManager</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/lifecycle/start/">start</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/settask/">setTask</a></span><span class="punctuation">(</span><span class="string">'ping'</span><span class="punctuation">,</span> <span class="keyword">async</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="keyword">await</span> <span class="function">fetch</span><span class="punctuation">(</span><span class="string">'https://example.org'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>Once this has been done, we can query the <a href="/api/tinytick/interfaces/manager/manager/"><code>Manager</code></a> to see what tasks it knows about with the <a href="/api/tinytick/interfaces/manager/manager/methods/task/gettaskids/"><code>getTaskIds</code></a> method:</p><pre><code>console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/gettaskids/">getTaskIds</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> ['ping']</span>
</code></pre><p>And for a given task, we can retrieve timeout and retry configuration:</p><pre><code>console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/gettaskconfig/">getTaskConfig</a></span><span class="punctuation">(</span><span class="string">'ping'</span><span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {maxDuration: 1000, maxRetries: 0, retryDelay: 1000, repeatDelay: null}</span>
</code></pre><p>The <code>true</code> argument to getTaskConfig ensures you see the inherited and default values as well as any overrides for the specific task (of which there are none in this case)</p><h3 id="tasks-can-have-a-parameter">Tasks can have a parameter</h3><p>You can configure a task to accept a single string parameter when it is run. This is useful when you want to run the same task with different inputs. To do this, simply add a parameter to the task function:</p><pre><code>manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/settask/">setTask</a></span><span class="punctuation">(</span><span class="string">'ping'</span><span class="punctuation">,</span> <span class="keyword">async</span> <span class="punctuation">(</span><span class="parameter">url</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="keyword">await</span> <span class="function">fetch</span><span class="punctuation">(</span>url<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>This parameter is provided when you schedule the task run. Of course you can schedule the same task multiple times with different parameters. For example, this would schedule two task runs, one to fetch <code>https://tinybase.org</code> in 100ms&#x27; time, and one to fetch <code>https://tinytick.org</code> after that:</p><pre><code>manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/taskrun/scheduletaskrun/">scheduleTaskRun</a></span><span class="punctuation">(</span><span class="string">'ping'</span><span class="punctuation">,</span> <span class="string">'https://tinybase.org'</span><span class="punctuation">,</span> <span class="number">100</span><span class="punctuation">)</span><span class="punctuation">;</span>
manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/taskrun/scheduletaskrun/">scheduleTaskRun</a></span><span class="punctuation">(</span><span class="string">'ping'</span><span class="punctuation">,</span> <span class="string">'https://tinytick.org'</span><span class="punctuation">,</span> <span class="number">200</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>Only one parameter can be provided to a task run. If you need to provide more, you should provide string-serialized JSON, and parse it in the task function.</p><h3 id="tasks-can-be-configured">Tasks can be configured</h3><p>Every task can have its own configuration, which can be set when the task is registered. The task configuration is a <a href="/api/tinytick/type-aliases/taskrun/taskrunconfig/"><code>TaskRunConfig</code></a> object with the following options:</p><ul><li><code>maxDuration</code> (number): The maximum time in milliseconds that the task is allowed to run before it is considered to have failed. The default is 1000ms.</li><li><code>maxRetries</code> (number): The maximum number of times the task will be retried if it fails. The default is 0.</li><li><code>retryDelay</code> (number): The time in milliseconds to wait before retrying the task. The default is 1000ms.</li><li><code>repeatDelay</code> (number): The time in milliseconds to wait before repeating the task if a run was successful. The default is <code>null</code>, which means the task will not be repeated.</li></ul><p>For example, if you wanted a task that would retry three times over 15 seconds if it failed, or run again after a minute if successful, you would register it accordingly:</p><pre><code>manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/settask/">setTask</a></span><span class="punctuation">(</span><span class="string">'ping'</span><span class="punctuation">,</span> <span class="keyword">async</span> <span class="punctuation">(</span><span class="parameter">url</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="keyword">await</span> <span class="function">fetch</span><span class="punctuation">(</span>url<span class="punctuation">)</span><span class="punctuation">,</span> <span class="string">''</span><span class="punctuation">,</span> <span class="punctuation">{</span>
  <span class="literal-property">maxRetries</span><span class="operator">:</span> <span class="number">3</span><span class="punctuation">,</span>
  <span class="literal-property">retryDelay</span><span class="operator">:</span> <span class="number">5000</span><span class="punctuation">,</span>
  <span class="literal-property">repeatDelay</span><span class="operator">:</span> <span class="number">60000</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/gettaskconfig/">getTaskConfig</a></span><span class="punctuation">(</span><span class="string">'ping'</span><span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {maxDuration: 1000, maxRetries: 3, retryDelay: 5000, repeatDelay: 60000}</span>
</code></pre><p>This configuration can be overridden when the task is scheduled to run. In this case, for example, you might want to have a different timeout for certain websites.</p><h3 id="tasks-can-belong-to-categories">Tasks can belong to categories</h3><p>The third parameter to the <a href="/api/tinytick/interfaces/manager/manager/methods/task/settask/"><code>setTask</code></a> method is an optional category name. This allows you to group tasks together with similar configurations. For example, you might have a category of tasks called &#x27;network&#x27; that all have a common timeout and retry schedule. Create a category with the <a href="/api/tinytick/interfaces/manager/manager/methods/category/setcategory/"><code>setCategory</code></a> method:</p><pre><code>manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/category/setcategory/">setCategory</a></span><span class="punctuation">(</span><span class="string">'network'</span><span class="punctuation">,</span> <span class="punctuation">{</span>
  <span class="literal-property">maxDuration</span><span class="operator">:</span> <span class="number">2000</span><span class="punctuation">,</span>
  <span class="literal-property">maxRetries</span><span class="operator">:</span> <span class="number">5</span><span class="punctuation">,</span>
  <span class="literal-property">retryDelay</span><span class="operator">:</span> <span class="number">3000</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/settask/">setTask</a></span><span class="punctuation">(</span>
  <span class="string">'post'</span><span class="punctuation">,</span>
  <span class="keyword">async</span> <span class="punctuation">(</span><span class="parameter">url</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="keyword">await</span> <span class="function">fetch</span><span class="punctuation">(</span>url<span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">method</span><span class="operator">:</span> <span class="string">'POST'</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="string">'network'</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>
manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/settask/">setTask</a></span><span class="punctuation">(</span>
  <span class="string">'head'</span><span class="punctuation">,</span>
  <span class="keyword">async</span> <span class="punctuation">(</span><span class="parameter">url</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="keyword">await</span> <span class="function">fetch</span><span class="punctuation">(</span>url<span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">method</span><span class="operator">:</span> <span class="string">'HEAD'</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="string">'network'</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/gettaskconfig/">getTaskConfig</a></span><span class="punctuation">(</span><span class="string">'post'</span><span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {maxDuration: 2000, maxRetries: 5, retryDelay: 3000, repeatDelay: null}</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/gettaskconfig/">getTaskConfig</a></span><span class="punctuation">(</span><span class="string">'head'</span><span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {maxDuration: 2000, maxRetries: 5, retryDelay: 3000, repeatDelay: null}</span>
</code></pre><h3 id="de-registering-a-task">De-registering a task</h3><p>In case you need to remove a task from the <a href="/api/tinytick/interfaces/manager/manager/"><code>Manager</code></a>, you can use the <a href="/api/tinytick/interfaces/manager/manager/methods/task/deltask/"><code>delTask</code></a> method:</p><pre><code>console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/gettaskids/">getTaskIds</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> ['ping', 'post', 'head']</span>

manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/deltask/">delTask</a></span><span class="punctuation">(</span><span class="string">'ping'</span><span class="punctuation">)</span><span class="punctuation">;</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/gettaskids/">getTaskIds</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> ['post', 'head']</span>
</code></pre><h3 id="let-s-move-on">Let&#x27;s move on!</h3><p>So now that you now know how to register a task, it&#x27;s time to take a look at how they can be scheduled. Onwards to the <a href="/guides/scheduling-tasks/">Scheduling Tasks</a> guide!</p></section></article><aside></aside></main><footer><nav><a id="gh" href="https://github.com/tinyplex/tinytick" target="_blank">GitHub</a><a id="bs" href="https://bsky.app/profile/tinybase.bsky.social" target="_blank">Bluesky</a><a id="tw" href="https://x.com/tinybasejs" target="_blank">X / Twitter</a><a id="dc" href="https://discord.com/invite/mGz3mevwP8" target="_blank">Discord</a></nav><nav><a href="/">TinyTick <span id="version"></span></a> © 2025-</nav></footer><script>window.dataLayer=window.dataLayer||[];function g(){dataLayer.push(arguments);}g('js',new Date());g('config','G-14BZ56H85M');</script></body></html>