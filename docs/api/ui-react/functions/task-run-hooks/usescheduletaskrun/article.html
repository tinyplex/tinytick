<nav><ul><li><a href="/">TinyTick</a></li><li><a href="/api/">API</a></li><li><a href="/api/ui-react/"><code>ui-react</code></a></li><li><a href="/api/ui-react/functions/">Functions</a></li><li><a href="/api/ui-react/functions/task-run-hooks/">Task run hooks</a></li><li><a href="/api/ui-react/functions/task-run-hooks/usescheduletaskrun/"><code>useScheduleTaskRun</code></a></li></ul></nav><section class="s1" id="/api/ui-react/functions/task-run-hooks/usescheduletaskrun/" data-id="uSTR"><h1><code>useScheduleTaskRun</code></h1><p>The <code>useScheduleTaskRun</code> hook can be used to schedule a specific task in the <a href="/api/tinytick/interfaces/manager/manager/"><code>Manager</code></a> provided by a <a href="/api/ui-react/functions/context-components/provider/"><code>Provider</code></a> component.</p><pre><code><span class="function"><a href="/api/ui-react/functions/task-run-hooks/usescheduletaskrun/">useScheduleTaskRun</a></span><span class="punctuation">(</span>
  taskId<span class="operator">:</span> <span class="builtin">string</span><span class="punctuation">,</span>
  arg<span class="operator">?</span><span class="operator">:</span> <span class="builtin">string</span><span class="punctuation">,</span>
  startAfter<span class="operator">?</span><span class="operator">:</span> <span class="builtin">number</span><span class="punctuation">,</span>
  config<span class="operator">?</span><span class="operator">:</span> <span class="type"><a href="/api/tinytick/type-aliases/taskrun/taskrunconfig/">TaskRunConfig</a></span><span class="punctuation">,</span>
  configDeps<span class="operator">?</span><span class="operator">:</span> DependencyList<span class="punctuation">,</span>
<span class="punctuation">)</span><span class="operator">:</span> <span class="type"><a href="/api/tinytick/type-aliases/identity/id/">Id</a></span> <span class="operator">|</span> <span class="keyword">undefined</span></code></pre><div class="table"><table><tr><th></th><th>Type</th><th>Description</th></tr><tr><th><code>taskId</code></th><td><code><span class="builtin">string</span></code></td><td><p>The <a href="/api/tinytick/type-aliases/identity/id/"><code>Id</code></a> of the task to run.</p></td></tr><tr><th><code>arg<span class="operator">?</span></code></th><td><code><span class="builtin">string</span></code></td><td><p>An optional string argument to pass to the <a href="/api/tinytick/type-aliases/task/task/"><code>Task</code></a>.</p></td></tr><tr><th><code>startAfter<span class="operator">?</span></code></th><td><code><span class="builtin">number</span></code></td><td><p>A timestamp at, or duration after which, the task should run.</p></td></tr><tr><th><code>config<span class="operator">?</span></code></th><td><code><span class="type"><a href="/api/tinytick/type-aliases/taskrun/taskrunconfig/">TaskRunConfig</a></span></code></td><td><p>An optional <a href="/api/tinytick/type-aliases/taskrun/taskrunconfig/"><code>TaskRunConfig</code></a> to set for this run.</p></td></tr><tr><th><code>configDeps<span class="operator">?</span></code></th><td><code>DependencyList</code></td><td><p>An optional array of dependencies for the config object, which, if any change, result in the task being scheduled again. Defaults to an empty array.</p></td></tr><tr><th class="right">returns</th><td><code><span class="type"><a href="/api/tinytick/type-aliases/identity/id/">Id</a></span> <span class="operator">|</span> <span class="keyword">undefined</span></code></td><td><p></p><p>The new unique <a href="/api/tinytick/type-aliases/identity/id/"><code>Id</code></a> of the scheduled task run, or <code>undefined</code> if unsuccessful.</p><p></p></td></tr></table></div><p>When called, the task will be executed with the optional string argument provided, and can be configured to start at a specific time (<a href="/api/tinytick/type-aliases/timing/timestampms/"><code>TimestampMs</code></a>), or after a specific delay (<a href="/api/tinytick/type-aliases/timing/durationms/"><code>DurationMs</code></a>).</p><p>You can also provide a custom <a href="/api/tinytick/type-aliases/taskrun/taskrunconfig/"><code>TaskRunConfig</code></a> which lets you indicate the duration of the task run and its retry behaviors, for example.</p><p>The hook will return a unique <a href="/api/tinytick/type-aliases/identity/id/"><code>Id</code></a> for the scheduled task run. However, if the <a href="/api/tinytick/interfaces/manager/manager/"><code>Manager</code></a> is in the stopping state, new task runs can not be scheduled, and in that case, the method will return <code>undefined</code>.</p><p>The task run will be scheduled once when the component is first rendered, and will be only scheduled again if any of the arguments or configDeps dependencies change. If they do, any previously scheduled task run will be deleted.</p><section class="s2"><h2>Example</h2><p>This example shows how to use the <code>useScheduleTaskRun</code> hook within a component that&#x27;s nested inside a Provider. The hook is used to create a callback that will schedule a task in response to a click event.</p><pre><code><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createRoot<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'react-dom/client'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createManager<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinytick'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>Provider<span class="punctuation">,</span> useScheduleTaskRun<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinytick/ui-react'</span><span class="punctuation">;</span>

<span class="keyword">const</span> <span class="function-variable">Pane</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  <span class="function"><a href="/api/ui-react/functions/task-run-hooks/usescheduletaskrun/">useScheduleTaskRun</a></span><span class="punctuation">(</span><span class="string">'log'</span><span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="keyword">return</span> <span class="keyword">null</span><span class="punctuation">;</span>
<span class="punctuation">}</span><span class="punctuation">;</span>
<span class="keyword">const</span> <span class="function-variable">App</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="parameter"><span class="punctuation">{</span>manager<span class="punctuation">}</span></span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">(</span>
  <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react/functions/context-components/provider/">Provider</a></span></span> <span class="attr-name">manager</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>manager<span class="punctuation">}</span></span><span class="punctuation">></span></span><span class="plain-text">
    </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">Pane</span></span> <span class="punctuation">/></span></span><span class="plain-text">
  </span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span><span class="class-name"><a href="/api/ui-react/functions/context-components/provider/">Provider</a></span></span><span class="punctuation">></span></span>
<span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> manager <span class="operator">=</span> <span class="function"><a href="/api/tinytick/functions/creation/createmanager/">createManager</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/lifecycle/start/">start</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/settask/">setTask</a></span><span class="punctuation">(</span><span class="string">'log'</span><span class="punctuation">,</span> <span class="keyword">async</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">'Task ran'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> app <span class="operator">=</span> document<span class="punctuation">.</span><span class="function">createElement</span><span class="punctuation">(</span><span class="string">'div'</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> root <span class="operator">=</span> <span class="function">createRoot</span><span class="punctuation">(</span>app<span class="punctuation">)</span><span class="punctuation">;</span>
root<span class="punctuation">.</span><span class="function">render</span><span class="punctuation">(</span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">App</span></span> <span class="attr-name">manager</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>manager<span class="punctuation">}</span></span> <span class="punctuation">/></span></span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="comment">// ... wait 100ms for task to start running</span>
<span class="comment">// -> 'Task ran'</span>
</code></pre></section><section class="s2"><h2>Since</h2><p>v1.2.1</p></section><p>When called with an object as the first argument, the <code>useScheduleTaskRun</code> hook destructures it to make it easier to skip optional parameters.</p><pre><code><span class="function"><a href="/api/ui-react/functions/task-run-hooks/usescheduletaskrun/">useScheduleTaskRun</a></span><span class="punctuation">(</span>
  args<span class="operator">:</span> <span class="punctuation">{</span>
    taskId<span class="operator">:</span> <span class="builtin">string</span><span class="punctuation">;</span>
    arg<span class="operator">?</span><span class="operator">:</span> <span class="builtin">string</span><span class="punctuation">;</span>
    startAfter<span class="operator">?</span><span class="operator">:</span> <span class="builtin">number</span><span class="punctuation">;</span>
    config<span class="operator">?</span><span class="operator">:</span> <span class="type"><a href="/api/tinytick/type-aliases/taskrun/taskrunconfig/">TaskRunConfig</a></span><span class="punctuation">;</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
  configDeps<span class="operator">?</span><span class="operator">:</span> DependencyList<span class="punctuation">,</span>
<span class="punctuation">)</span><span class="operator">:</span> <span class="type"><a href="/api/tinytick/type-aliases/identity/id/">Id</a></span> <span class="operator">|</span> <span class="keyword">undefined</span></code></pre><div class="table"><table><tr><th></th><th>Type</th><th>Description</th></tr><tr><th><code>args</code></th><td><code><span class="punctuation">{</span> taskId<span class="operator">:</span> <span class="builtin">string</span><span class="punctuation">;</span> arg<span class="operator">?</span><span class="operator">:</span> <span class="builtin">string</span><span class="punctuation">;</span> startAfter<span class="operator">?</span><span class="operator">:</span> <span class="builtin">number</span><span class="punctuation">;</span> config<span class="operator">?</span><span class="operator">:</span> <span class="type"><a href="/api/tinytick/type-aliases/taskrun/taskrunconfig/">TaskRunConfig</a></span><span class="punctuation">;</span> <span class="punctuation">}</span></code></td><td><p>An object containing the <a href="/api/tinytick/type-aliases/identity/id/"><code>Id</code></a> of the task to run, an optional string argument to pass to the <a href="/api/tinytick/type-aliases/task/task/"><code>Task</code></a>, an optional timestamp at, or duration after which, the task should run; and an optional <a href="/api/tinytick/type-aliases/taskrun/taskrunconfig/"><code>TaskRunConfig</code></a> to set for this run.</p></td></tr><tr><th><code>configDeps<span class="operator">?</span></code></th><td><code>DependencyList</code></td><td><p>An optional array of dependencies for the config object, which, if any change, result in the task being scheduled again. Defaults to an empty array.</p></td></tr><tr><th class="right">returns</th><td><code><span class="type"><a href="/api/tinytick/type-aliases/identity/id/">Id</a></span> <span class="operator">|</span> <span class="keyword">undefined</span></code></td><td><p></p><p>The new unique <a href="/api/tinytick/type-aliases/identity/id/"><code>Id</code></a> of the scheduled task run, or <code>undefined</code> if unsuccessful.</p><p></p></td></tr></table></div><section class="s2"><h2>Example</h2><p>This example shows how to use the <code>useScheduleTaskRun</code> hook within a component that&#x27;s nested inside a Provider. The hook is used to create a callback that will schedule a task in response to a click event.</p><pre><code><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createRoot<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'react-dom/client'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createManager<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinytick'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>Provider<span class="punctuation">,</span> useScheduleTaskRun<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinytick/ui-react'</span><span class="punctuation">;</span>

<span class="keyword">const</span> <span class="function-variable">Pane</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  <span class="function"><a href="/api/ui-react/functions/task-run-hooks/usescheduletaskrun/">useScheduleTaskRun</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">taskId</span><span class="operator">:</span> <span class="string">'log'</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="keyword">return</span> <span class="keyword">null</span><span class="punctuation">;</span>
<span class="punctuation">}</span><span class="punctuation">;</span>
<span class="keyword">const</span> <span class="function-variable">App</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="parameter"><span class="punctuation">{</span>manager<span class="punctuation">}</span></span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">(</span>
  <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react/functions/context-components/provider/">Provider</a></span></span> <span class="attr-name">manager</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>manager<span class="punctuation">}</span></span><span class="punctuation">></span></span><span class="plain-text">
    </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">Pane</span></span> <span class="punctuation">/></span></span><span class="plain-text">
  </span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span><span class="class-name"><a href="/api/ui-react/functions/context-components/provider/">Provider</a></span></span><span class="punctuation">></span></span>
<span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> manager <span class="operator">=</span> <span class="function"><a href="/api/tinytick/functions/creation/createmanager/">createManager</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/lifecycle/start/">start</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/settask/">setTask</a></span><span class="punctuation">(</span><span class="string">'log'</span><span class="punctuation">,</span> <span class="keyword">async</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">'Task ran'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> app <span class="operator">=</span> document<span class="punctuation">.</span><span class="function">createElement</span><span class="punctuation">(</span><span class="string">'div'</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> root <span class="operator">=</span> <span class="function">createRoot</span><span class="punctuation">(</span>app<span class="punctuation">)</span><span class="punctuation">;</span>
root<span class="punctuation">.</span><span class="function">render</span><span class="punctuation">(</span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">App</span></span> <span class="attr-name">manager</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>manager<span class="punctuation">}</span></span> <span class="punctuation">/></span></span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="comment">// ... wait 100ms for task to start running</span>
<span class="comment">// -> 'Task ran'</span>
</code></pre></section><section class="s2"><h2>Since</h2><p>v1.2.5</p></section></section>