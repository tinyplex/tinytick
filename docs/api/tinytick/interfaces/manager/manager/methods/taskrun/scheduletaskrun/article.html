<nav><ul><li><a href="/">TinyTick</a></li><li><a href="/api/">API</a></li><li><a href="/api/tinytick/"><code>tinytick</code></a></li><li><a href="/api/tinytick/interfaces/">Interfaces</a></li><li><a href="/api/tinytick/interfaces/manager/manager/"><code>Manager</code></a></li><li><a href="/api/tinytick/interfaces/manager/manager/methods/taskrun/">TaskRun methods</a></li><li><a href="/api/tinytick/interfaces/manager/manager/methods/taskrun/scheduletaskrun/"><code>scheduleTaskRun</code></a></li></ul></nav><section class="s1" id="/api/tinytick/interfaces/manager/manager/methods/taskrun/scheduletaskrun/" data-id="sTR"><h1><code>scheduleTaskRun</code></h1><p>The <code>scheduleTaskRun</code> method schedules a specific task to run in the future.</p><pre><code><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/taskrun/scheduletaskrun/">scheduleTaskRun</a></span><span class="punctuation">(</span>
  taskId<span class="operator">:</span> <span class="builtin">string</span><span class="punctuation">,</span>
  arg<span class="operator">?</span><span class="operator">:</span> <span class="builtin">string</span><span class="punctuation">,</span>
  startAfter<span class="operator">?</span><span class="operator">:</span> <span class="builtin">number</span><span class="punctuation">,</span>
  config<span class="operator">?</span><span class="operator">:</span> <span class="type"><a href="/api/tinytick/type-aliases/taskrun/taskrunconfig/">TaskRunConfig</a></span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="operator">:</span> <span class="keyword">undefined</span> <span class="operator">|</span> <span class="builtin">string</span></code></pre><div class="table"><table><tr><th></th><th>Type</th><th>Description</th></tr><tr><th><code>taskId</code></th><td><code><span class="builtin">string</span></code></td><td><p>The <a href="/api/tinytick/type-aliases/identity/id/"><code>Id</code></a> of the task to run.</p></td></tr><tr><th><code>arg<span class="operator">?</span></code></th><td><code><span class="builtin">string</span></code></td><td><p>An optional string argument to pass to the <a href="/api/tinytick/type-aliases/task/task/"><code>Task</code></a>.</p></td></tr><tr><th><code>startAfter<span class="operator">?</span></code></th><td><code><span class="builtin">number</span></code></td><td><p>A timestamp at, or duration after which, the task should run.</p></td></tr><tr><th><code>config<span class="operator">?</span></code></th><td><code><span class="type"><a href="/api/tinytick/type-aliases/taskrun/taskrunconfig/">TaskRunConfig</a></span></code></td><td><p>An optional <a href="/api/tinytick/type-aliases/taskrun/taskrunconfig/"><code>TaskRunConfig</code></a> to set for this run.</p></td></tr><tr><th class="right">returns</th><td><code><span class="keyword">undefined</span> <span class="operator">|</span> <span class="builtin">string</span></code></td><td><p></p><p>A new unique <a href="/api/tinytick/type-aliases/identity/id/"><code>Id</code></a> of the scheduled task run, or <code>undefined</code> if unsuccessful.</p><p></p></td></tr></table></div><p>The task will be executed with the optional string argument provided, and can be configured to start at a specific time (<a href="/api/tinytick/type-aliases/timing/timestampms/"><code>TimestampMs</code></a>), or after a specific delay (<a href="/api/tinytick/type-aliases/timing/durationms/"><code>DurationMs</code></a>).</p><p>You can also provide a custom <a href="/api/tinytick/type-aliases/taskrun/taskrunconfig/"><code>TaskRunConfig</code></a> which lets you indicate the duration of the task run and its retry behaviors, for example.</p><p>The complete configuration of the task run will be created by merging the properties of this <a href="/api/tinytick/type-aliases/taskrun/taskrunconfig/"><code>TaskRunConfig</code></a> with those registered with the <a href="/api/tinytick/type-aliases/task/task/"><code>Task</code></a>, and in turn with its category, if any. Any properties not provided will be defaulted by TinyTick. This resolution of the run&#x27;s configuration is done at the moment the run starts (not when it is scheduled), but after that, it will not change subsequently, even if, say, the task or category are reconfigured after it has started.</p><p>This method returns a unique <a href="/api/tinytick/type-aliases/identity/id/"><code>Id</code></a> for the scheduled task run. However, if the <a href="/api/tinytick/interfaces/manager/manager/"><code>Manager</code></a> is in the stopping state, new task runs can not be scheduled, and in that case, the method will return <code>undefined</code>.</p><section class="s2"><h2>Examples</h2><p>This example registers a task that is then scheduled to run.</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createManager<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinytick'</span><span class="punctuation">;</span>

<span class="keyword">const</span> manager <span class="operator">=</span> <span class="function"><a href="/api/tinytick/functions/creation/createmanager/">createManager</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/settask/">setTask</a></span><span class="punctuation">(</span><span class="string">'ping'</span><span class="punctuation">,</span> <span class="keyword">async</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="keyword">await</span> <span class="function">fetch</span><span class="punctuation">(</span><span class="string">'https://example.org'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> taskRunId <span class="operator">=</span> manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/taskrun/scheduletaskrun/">scheduleTaskRun</a></span><span class="punctuation">(</span><span class="string">'ping'</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/taskrun/getscheduledtaskrunids/">getScheduledTaskRunIds</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span>length<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 1</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/taskrun/gettaskrunconfig/">getTaskRunConfig</a></span><span class="punctuation">(</span>taskRunId<span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {maxDuration: 1000, maxRetries: 0, retryDelay: 1000, repeatDelay: null}</span>
</code></pre><p>This example registers a task that takes a string parameter and that is then scheduled to run with an argument.</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createManager<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinytick'</span><span class="punctuation">;</span>

<span class="keyword">const</span> manager <span class="operator">=</span> <span class="function"><a href="/api/tinytick/functions/creation/createmanager/">createManager</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/settask/">setTask</a></span><span class="punctuation">(</span><span class="string">'ping'</span><span class="punctuation">,</span> <span class="keyword">async</span> <span class="punctuation">(</span><span class="parameter">url</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="keyword">await</span> <span class="function">fetch</span><span class="punctuation">(</span>url<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> taskRunId <span class="operator">=</span> manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/taskrun/scheduletaskrun/">scheduleTaskRun</a></span><span class="punctuation">(</span><span class="string">'ping'</span><span class="punctuation">,</span> <span class="string">'https://example.org'</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/taskrun/getscheduledtaskrunids/">getScheduledTaskRunIds</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span>length<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 1</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/taskrun/gettaskruninfo/">getTaskRunInfo</a></span><span class="punctuation">(</span>taskRunId<span class="punctuation">)</span><span class="punctuation">.</span>arg<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'https://example.org'</span>
</code></pre><p>This example registers a task that has a category and that is then scheduled to run. Configuration is provided, for the category, the task, and this specific run.</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createManager<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinytick'</span><span class="punctuation">;</span>

<span class="keyword">const</span> manager <span class="operator">=</span> <span class="function"><a href="/api/tinytick/functions/creation/createmanager/">createManager</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/category/setcategory/">setCategory</a></span><span class="punctuation">(</span><span class="string">'network'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">maxDuration</span><span class="operator">:</span> <span class="number">5000</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/task/settask/">setTask</a></span><span class="punctuation">(</span>
  <span class="string">'ping'</span><span class="punctuation">,</span>
  <span class="keyword">async</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="keyword">await</span> <span class="function">fetch</span><span class="punctuation">(</span><span class="string">'https://example.org'</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="string">'network'</span><span class="punctuation">,</span>
  <span class="punctuation">{</span><span class="literal-property">maxRetries</span><span class="operator">:</span> <span class="number">3</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> taskRunId <span class="operator">=</span> manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/taskrun/scheduletaskrun/">scheduleTaskRun</a></span><span class="punctuation">(</span><span class="string">'ping'</span><span class="punctuation">,</span> <span class="string">''</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">retryDelay</span><span class="operator">:</span> <span class="number">10</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>manager<span class="punctuation">.</span><span class="function"><a href="/api/tinytick/interfaces/manager/manager/methods/taskrun/gettaskrunconfig/">getTaskRunConfig</a></span><span class="punctuation">(</span>taskRunId<span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {maxDuration: 5000, maxRetries: 3, retryDelay: 10, repeatDelay: null}</span>
</code></pre></section><section class="s2"><h2>Since</h2><p>v1.0.0</p></section></section>